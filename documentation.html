<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<link rel="stylesheet" href="normalize.css" type="text/css">
		<link rel="stylesheet" href="stylesheet.css" type="text/css">
		<script src="http://yandex.st/highlightjs/6.1/highlight.min.js" type="text/javascript">
</script>
		<link rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/default.min.css" type="text/css">
		<link rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/github.css" type="text/css">
		<script type="text/javascript">
hljs.initHighlightingOnLoad();
		</script>
		<title>
			EclipseCon M2M contest
		</title>
	</head>
	<body>
		<div id="header">
			Machine-to-Machine Programming Contest
		</div>
		<p>
			The Forum has been wired!
		</p>
		<p>
			We have spread sensors and various sorts of devices (including an actual robot made of Lego Mindstorms NXT) all over the Forum, and invite you to unleash your creativity by designing an application that will use all the data. Mobile app, augmented reality, social interactivity... the only limit is your imagination.
		</p>
		<p>
			The winner will get an <strong>Apple iPad 2</strong>!
		</p>
		<p>
			If you don't feel like writing a whole application and would like to be part of the contest, just fill in a ticket and join our daily draw to try to win cool swag!
		</p>
		<h1>
			General description
		</h1>
		<h1>
			Programming contest
		</h1>
		<h2>
			Rules
		</h2>
		<div id="fightclub">
			<p>
				<strong><u>Rule #1</u></strong><br>
				You do speak about the M2M contest with everyone at the conference.
			</p>
			<p>
				<strong><u>Rule #2</u></strong><br>
				You <strong>DO</strong> speak about the M2M contest with everyone at the conference!
			</p>
		</div>
		<h2>
			API
		</h2>
		<p>
			A <a href="http://www.mongodb.org/" target="_blank">MongoDB</a> database stores the data history for all the sensors, and you can access it using a very simple REST API.
		</p>
		<p>
			The URL to which you should make GET requests is: <code>http://m2mcontest.eclipsecon.org/rest_api/&lt;<strong>databaseName</strong>&gt;/&lt;<strong>collectionName</strong>&gt;?<strong>query_params</strong></code>
		</p>
		<h3>
			Allowed query parameters
		</h3>
		<ul>
			<li>
				<p>
					<code>criteria=<em>search_criteria</em></code><br>
					<em>search_criteria</em> is a JSON representation of the search filter.
				</p>If you just want to filter results for which a given key equals a given value, use the following syntax: <code>{"sensor": "CUBE_TEMPERATURE"}</code><br>
				If you want to filter results for which a given key is greater than a given value, use the following syntax: <code>{"value": {"$gt": 500}}</code><br>
			</li>
			<li>
				<p>
					<code>sort=<em>sort_fields</em></code><br>
					<em>sort_fields</em> is a JSON representation of the field you wants to sort the result by, with the associated order.
				</p><code>{"sensor":1,"value":-1}</code> would sort the result by ascending 'sensor' key, and descending 'value' key.
			</li>
			<li>
				<p>
					<code>batch_size=<em>n</em></code><br>
					<em>n</em> is the maximum number of results you want to get.
				</p>
			</li>
		</ul>
		<h3>
			<code><strong>sensors</strong></code> database
		</h3>
		<ul>
			<li>
				<p>
					<code><strong>data</strong></code> collection contains the raw data. That means there are tons of data in this collection, but it can be useful if you want to access the last instant value of a given variable.
				</p>
				<p>
					Returned values have the following format:
				</p>
				<pre>
<code>
{
  "id":0,
  "ok":1,
  "results":[
    {
      "_id":{
        "$oid":"4e98b520e4b0331bc63552f8"
      },
      "sensor":"CUBE_ILLUMINANCE",
      "value":250
    },
    {
      "_id":{
        "$oid":"4e98b520e4b0331bc63552f9"
      },
      "sensor":"CUBE_TEMPERATURE",
      "value":19.010000000000002
    }
  ]
}
</code>
</pre>
			</li>
			<li>
				<p>
					<code><strong>consolidatedData_OneMinute</strong></code>, <code><strong>consolidatedData_FiveMinute</strong></code> and <code><strong>consolidatedData_OneHour</strong></code> collections contain the results of a map/reduce job applied to raw data, and allow you to access min/max/averages sensors values on given periods of time.
				</p>
				<p>
					Returned values have the following format:
				</p>
				<pre>
<code>
{
  "id":7,
  "ok":1,
  "results":[
    {
      "_id":{
        "sensorId":"CUBE_ILLUMINANCE",
        "ts":{
          "$date":1318630680000
        }
      },
      "value":{
        "average":275.0,
        "maximum":300.0,
        "minimum":250.0,
        "nbSamples":2.0,
        "sensorId":"CUBE_ILLUMINANCE"
      }
    },
    {
      "_id":{
        "sensorId":"CUBE_TEMPERATURE",
        "ts":{
          "$date":1318630680000
        }
      },
      "value":{
        "average":19.02,
        "maximum":19.02,
        "minimum":19.010000000000002,
        "nbSamples":2.0,
        "sensorId":"CUBE_TEMPERATURE"
      }
    }
  ]
}
</code>
</pre>
			</li>
		</ul>
		<h2>
			Application example
		</h2>
		<p>
			We have put a very simple application example on github to help you getting familiar with the API and the manipulation of consolidated data.<br>
			You can grab the source code at: <a href="https://github.com/kartben/eclipsecon-m2m-contest/tree/master/samples/" target="_blank">https://github.com/kartben/eclipsecon-m2m-contest/tree/master/samples/</a>
		</p>
			<iframe id="temperature-chart" src="index.html" scrolling="no"></iframe>
		<h2>
			Jury
		</h2>
	</body>
</html>
